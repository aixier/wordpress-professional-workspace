# Apache Virtual Host Configuration for WordPress Development

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/html
    
    # Directory permissions
    <Directory /var/www/html>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
        
        # Security headers
        Header always set X-Content-Type-Options nosniff
        Header always set X-Frame-Options SAMEORIGIN
        Header always set X-XSS-Protection "1; mode=block"
    </Directory>
    
    # WordPress specific directives
    <Directory /var/www/html/wp-content>
        Options -Indexes
    </Directory>
    
    <Directory /var/www/html/wp-content/uploads>
        Options -Indexes -ExecCGI
        AddHandler cgi-script .php .pl .py .jsp .asp .sh .cgi
    </Directory>
    
    # Protect wp-config.php
    <Files wp-config.php>
        Require all denied
    </Files>
    
    # Protect .htaccess files
    <Files ~ "^\.ht">
        Require all denied
    </Files>
    
    # Logging for development
    ErrorLog /var/log/wordpress/apache_error.log
    CustomLog /var/log/wordpress/apache_access.log combined
    LogLevel info
    
    # Enable gzip compression
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/plain
        AddOutputFilterByType DEFLATE text/html
        AddOutputFilterByType DEFLATE text/xml
        AddOutputFilterByType DEFLATE text/css
        AddOutputFilterByType DEFLATE application/xml
        AddOutputFilterByType DEFLATE application/xhtml+xml
        AddOutputFilterByType DEFLATE application/rss+xml
        AddOutputFilterByType DEFLATE application/javascript
        AddOutputFilterByType DEFLATE application/x-javascript
        AddOutputFilterByType DEFLATE application/json
    </IfModule>
    
    # Set cache headers for static assets
    <IfModule mod_expires.c>
        ExpiresActive On
        
        # Images
        ExpiresByType image/jpg "access plus 1 month"
        ExpiresByType image/jpeg "access plus 1 month"
        ExpiresByType image/gif "access plus 1 month"
        ExpiresByType image/png "access plus 1 month"
        ExpiresByType image/webp "access plus 1 month"
        ExpiresByType image/svg+xml "access plus 1 month"
        
        # CSS and JavaScript
        ExpiresByType text/css "access plus 1 week"
        ExpiresByType application/javascript "access plus 1 week"
        ExpiresByType application/x-javascript "access plus 1 week"
        
        # Fonts
        ExpiresByType font/woff "access plus 1 month"
        ExpiresByType font/woff2 "access plus 1 month"
        ExpiresByType application/font-woff "access plus 1 month"
        ExpiresByType application/font-woff2 "access plus 1 month"
    </IfModule>
    
    # WordPress pretty permalinks
    <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /
        RewriteRule ^index\.php$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.php [L]
    </IfModule>
    
    # Development environment variables
    SetEnv WP_ENV development
    SetEnv WP_DEBUG true
    SetEnv WP_DEBUG_LOG true
    
</VirtualHost>

# Status page for monitoring
<IfModule mod_status.c>
    ExtendedStatus On
    <Location "/server-status">
        SetHandler server-status
        Require local
    </Location>
</IfModule>

# Info page for development
<IfModule mod_info.c>
    <Location "/server-info">
        SetHandler server-info
        Require local
    </Location>
</IfModule>